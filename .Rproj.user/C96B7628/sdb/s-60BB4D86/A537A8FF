{
    "collab_server" : "",
    "contents" : "\n\nrfm_data <- rfm_load('//wdmpsvr01/RedirectedFolders/clemence.burnichon/My Documents/code_repo/rfm/cust.csv')\n\nmodel <- rfm(rfm_data, n_freq = 3, n_rec = 2, n_mon = 4 , score = T)\n\nmodel\n\n\nlibrary(highcharter)\n\n## plot number of customer per segment \n\n\nf_dist <- as.data.frame(table(model$Fr))\nr_dist <- as.data.frame(table(model$Re))\nm_dist <- as.data.frame(table(model$Mo))\n\nhc_freq <- highchart()%>%\n  hc_add_series(name = 'Frequency segment', data = f_dist$Freq, type = 'column', color = 'green',dataLabels = list(align = 'center', enabled = T , format = \"{point.y}\"))%>%\n  hc_xAxis(categories = f_dist$Var1)\nhc_freq\n\nhc_rec <- highchart()%>%\n  hc_add_series(name = 'Recency segment', data = r_dist$Freq, type = 'column', color = 'blue',dataLabels = list(align = 'center', enabled = T , format = \"{point.y}\"))%>%\n  hc_xAxis(categories = r_dist$Var1)\nhc_rec\n\nhc_mon <- highchart()%>%\n  hc_add_series(name = 'Value segment', data = m_dist$Freq, type = 'column', color = 'red', dataLabels = list(align = 'center', enabled = T , format = \"{point.y}\"))%>%\n  hc_xAxis(categories = m_dist$Var1)\nhc_mon\n\n#---------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\nhc_score <- highchart()\nfor (sc in unique(model$score)) {\n  hc_score <- hc_score %>%\n    hc_add_series_scatter(model$monetary[model$score == sc],\n                          model$frequency[model$score == sc],\n                          name = sprintf(\"Score %s\", sc),\n                          showInLegend = TRUE)\n}\n\nhc_score\n\n\n\n\n\nhc_score <- highchart()\nfor (sc in unique(hf$score)) {\n  hc_score <- hc_score %>%\n    hc_add_series_scatter(hf$monetary[hf$score == sc],\n                          hf$frequency[hf$score == sc],\n                          name = sprintf(\"Score %s\", sc),\n                          showInLegend = TRUE)\n}\n\nhc_score\n\n\n\n\n## average per score \n\nlibrary(data.table)\n\nhf <- as.data.table(hf)\n\navg_score <- hf[, .(.N, rec = mean(recency), freq = mean(frequency),mon = mean(monetary)), by= (score)]\navg_score\n\navg_score <- avg_score[order(-mon,-freq,rec)]\n\nhc_segment <- highchart()%>%\n  hc_add_series_scatter(avg_score$mon, avg_score$freq)\nhc_segment\n\n\n\n\n\n\n\n\n\n",
    "created" : 1484215280297.000,
    "dirty" : true,
    "encoding" : "",
    "folds" : "",
    "hash" : "1243421718",
    "id" : "A537A8FF",
    "lastKnownWriteTime" : 30962681237012581,
    "last_content_update" : 1484224675966,
    "path" : null,
    "project_path" : null,
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 4,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}